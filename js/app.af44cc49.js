(function(t){function e(e){for(var s,n,o=e[0],l=e[1],c=e[2],d=0,p=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&p.push(a[n][0]),a[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],s=!0,o=1;o<r.length;o++){var l=r[o];0!==a[l]&&(s=!1)}s&&(i.splice(e--,1),t=n(n.s=r[0]))}return t}var s={},a={app:0},i=[];function n(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=s,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"006c":function(t,e,r){},1701:function(t,e){t.exports="data:image/webp;base64,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"},"1c1e":function(t,e,r){},"266e":function(t,e,r){},"2b0e3":function(t,e,r){},"2bbd":function(t,e,r){"use strict";var s=r("600b"),a=r.n(s);a.a},"335e":function(t,e,r){},"34eb":function(t,e,r){"use strict";var s=r("3db9"),a=r.n(s);a.a},"3db9":function(t,e,r){},"3e82":function(t,e,r){},5047:function(t,e,r){"use strict";var s=r("5db8"),a=r.n(s);a.a},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),a=r("8c4f"),i=r("5c96"),n=r.n(i),o=(r("0fae"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("NavGlobal"),r("NavPage"),r("router-view"),r("FooterGlobal")],1)}),l=[],c=(r("f771"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",[r("el-row",[r("el-col",{attrs:{span:4,id:"logo"}},[r("router-link",{attrs:{to:"/"}},[t._v("锤")])],1),r("el-col",{staticClass:"link-group text-center",attrs:{span:16}},[r("a",{attrs:{href:"#"}},[t._v("在线商城")]),r("a",{attrs:{href:"#"}},[t._v("坚果Pro3")]),r("a",{attrs:{href:"#"}},[t._v("坚果Pro2S")]),r("a",{attrs:{href:"#"}},[t._v("坚果TNT工作站")]),r("a",{attrs:{href:"#"}},[t._v("Smartisan OS")]),r("a",{attrs:{href:"#"}},[t._v("论坛")])]),r("el-col",{staticClass:"text-right auth",attrs:{span:4}},[t.user?r("span",[r("router-link",{attrs:{to:t.user.IS_ADMIN?"/admin":"/me"}},[t._v(t._s(t.user.nickname||t.user.mail))]),r("a",{attrs:{href:"#"},on:{click:function(e){return t.session.logout()}}},[t._v("登出")])],1):r("span",[r("router-link",{attrs:{to:"/login"}},[t._v("登录/注册")])],1)])],1)],1)}),u=[];function d(t,e){localStorage.setItem(t,JSON.stringify(e))}function p(t){var e=localStorage.getItem(t);return e?JSON.parse(e):null}var f={set:d,get:p};function m(){return localStorage.getItem("sessionId")}function v(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/";localStorage.setItem("sessionId",t),f.set("user",e),r&&(location.href=r)}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";localStorage.removeItem("sessionId"),localStorage.removeItem("user"),location.href=t}function _(){return f.get("user")}function b(){var t=_();return t&&t.IS_ADMIN}var C={loggedIn:m,login:v,logout:h,user:_,isAdmin:b},g={mounted:function(){this.user=C.user()},data:function(){return{user:{},session:C}}},w=g,y=(r("34eb"),r("2877")),k=Object(y["a"])(w,c,u,!1,null,null,null),x=k.exports,O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"nav-page"},[r("el-row",{staticClass:"container"},[r("el-col",{staticClass:"ling-group",attrs:{span:18}},[r("a",{attrs:{href:"#"}},[t._v("首页")]),r("a",{attrs:{href:"#"}},[t._v("手机")]),r("a",{attrs:{href:"#"}},[t._v("官方配件")]),r("a",{attrs:{href:"#"}},[t._v("服饰箱包")]),r("a",{attrs:{href:"#"}},[t._v("畅呼吸")]),r("a",{attrs:{href:"#"}},[t._v("好物精选")])]),r("el-col",{staticClass:"search text-right",attrs:{span:6}},[r("el-input",{attrs:{"prefix-icon":"el-icon-search",size:"medium"}})],1)],1)],1)},D=[],A={},S=A,I=(r("a419"),Object(y["a"])(S,O,D,!1,null,null,null)),$=I.exports,z=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("footer",[r("div",{staticClass:"container"},[r("el-row",{staticClass:"web-links"},[r("el-col",{attrs:{span:3}},[r("div",{staticClass:"title"},[t._v("订单服务")]),r("div",{staticClass:"link-group-v"},[r("a",{attrs:{href:"#"}},[t._v("购买指南")]),r("a",{attrs:{href:"#"}},[t._v("送货政策")])])]),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"title"},[t._v("订单服务")]),r("div",{staticClass:"link-group-v"},[r("a",{attrs:{href:"#"}},[t._v("零售门店")]),r("a",{attrs:{href:"#"}},[t._v("自助服务")]),r("a",{attrs:{href:"#"}},[t._v("维修门店")])])]),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"title"},[t._v("媒体中心")]),r("div",{staticClass:"link-group-v"},[r("a",{attrs:{href:"#"}},[t._v("新闻动态")]),r("a",{attrs:{href:"#"}},[t._v("官方视频")]),r("a",{attrs:{href:"#"}},[t._v("图片资料")])])]),r("el-col",{attrs:{span:3}},[r("div",{staticClass:"title"},[t._v("关注我们")]),r("div",{staticClass:"link-group-v"},[r("a",{attrs:{href:"#"}},[t._v("新浪微博")]),r("a",{attrs:{href:"#"}},[t._v("官方微信")]),r("a",{attrs:{href:"#"}},[t._v("荣誉奖项")])])]),r("el-col",{staticClass:"text-right",attrs:{span:6,offset:6}},[r("div",{staticClass:"custom-phone"},[t._v("400 - 603 - 5000")]),r("div",{staticClass:"support-time"},[t._v(" 周一到周日 9:00 - 18:00 "),r("br"),t._v("（仅收市话费） ")]),r("div",{staticClass:"online-help"},[r("button",[t._v("在线帮助")])])])],1),t._m(0)],1)])},j=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"meta-info"},[r("div",{staticClass:"copyright"},[r("span",[t._v("Copyright © 2020 smartisan.com 版权所有")]),r("a",{attrs:{href:"#"}},[t._v("锤子商城隐私政策")]),r("a",{attrs:{href:"#"}},[t._v("锤子商城用户协议")]),r("a",{attrs:{href:"#"}},[t._v("资质证照")])]),r("div",[t._v("京 ICP 备 19048576 号 - 1京公网安备 11010502039854号")])])}],U={},P=U,B=(r("9cb3"),Object(y["a"])(P,z,j,!1,null,null,null)),F=B.exports,T={name:"App",components:{NavGlobal:x,NavPage:$,FooterGlobal:F}},M=T,q=Object(y["a"])(M,o,l,!1,null,null,null),E=q.exports,Q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"container"},[r("div",{staticClass:"banner-slider wrapper-box"},[r("el-carousel",{attrs:{height:"480px"}},t._l(t.list_carousel,(function(t,e){return r("el-carousel-item",{key:e},[r("router-link",{attrs:{to:"/product/"+t.id}},[r("img",{attrs:{src:t.carousel_img}})])],1)})),1)],1),r("el-row",{staticClass:"prom-area wrapper-box",attrs:{gutter:1}},t._l(t.list_top_banner,(function(t,e){return r("el-col",{key:e,staticClass:"prom-box",attrs:{span:6}},[r("img",{attrs:{src:t.top_banner_img,alt:""}}),r("a",{attrs:{href:"#"}})])})),1),r("el-row",{staticClass:"hot-sale-area wrapper-box"},[r("div",{staticClass:"title"},[t._v("热门商品")]),r("el-row",{staticClass:"box-container"},t._l(t.list_hot,(function(e,s){return r("el-col",{key:s,staticClass:"product-box text-center",attrs:{span:6}},[r("router-link",{attrs:{to:"/product/"+e.id}},[r("div",{staticClass:"thumbnail"},[r("img",{attrs:{src:t.fileUrl(e.main_img[0]),alt:""}})]),r("div",{staticClass:"name"},[t._v(t._s(e.title))]),r("div",{staticClass:"desc"}),r("div",{staticClass:"opt"}),r("div",{staticClass:"price"},[r("span",{staticClass:"now cny"},[t._v(t._s(e.price))]),r("span",{staticClass:"before cny"},[t._v("199.00")])])])],1)})),1)],1)],1)])},V=[],R=r("ade3"),Z=r("b468"),H=r.n(Z),N=r("1701"),X=r.n(N),K=r("bc3a"),Y=r.n(K),G="968303a52cb0e4e0c8db437230bd10857ec4b35c3c56c0a711b341afcc956d4f";function L(t,e){var r=Date.now();return Y.a.post("http://mock.biaoyansu.com/api/1/".concat(t),e,{headers:{"BIAO-MOCK-APP-KEY":G,"BIAO-MOCK-TIMESTAMP":r,"BIAO-MOCK-SIGNATURE":W(G,r)}}).then((function(t){return t.data}))}function W(t,e){return btoa(t+e)}window.api=L;r("4160"),r("159b");function J(t){return"https://"+t._base_url+"/"+t._key}function tt(t){var e=0;return t.forEach((function(t){e+=t.product_snapshot.price*t.count})),e}var et={mounted:function(){this.read("hot"),this.read("carousel"),this.read("top_banner")},data:function(){return{prom:H.a,product:X.a,list_hot:[],list_carousel:[],list_top_banner:[]}},methods:{fileUrl:J,read:function(t){var e=this;L("product/read",{where:{and:Object(R["a"])({},"is_"+t,!0)}}).then((function(r){r.success&&(e["list_"+t]=r.data||[])}))}}},rt=et,st=(r("89f1"),Object(y["a"])(rt,Q,V,!1,null,null,null)),at=st.exports,it=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"container-form"},[r("div",{staticClass:"form-card"},[r("div",{staticClass:"title"},[t._v("邮箱验证码注册")]),r("form",{on:{submit:function(e){return e.preventDefault(),t.signup(e)}}},[r("div",{staticClass:"input-control"},[r("el-input",{attrs:{placeholder:"邮箱"},model:{value:t.form.mail,callback:function(e){t.$set(t.form,"mail",e)},expression:"form.mail"}})],1),r("div",{staticClass:"input-control"},[r("el-input",{attrs:{placeholder:"设置密码","show-password":""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),r("div",{staticClass:"input-control"},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"验证码"},model:{value:t.currentCode,callback:function(e){t.currentCode=e},expression:"currentCode"}},[r("el-button",{attrs:{slot:"append",disabled:!!t.sendCodeCountDown},on:{click:t.sendCode},slot:"append"},[t.sendCodeCountDown?r("span",[t._v(t._s(t.sendCodeCountDown)+"s")]):r("span",[t._v("获取验证码")])])],1)],1),r("div",{staticClass:"hint"},[r("router-link",{attrs:{to:"/login"}},[t._v("已有账号，去登录")])],1),r("div",{staticClass:"error"},t._l(t.errors,(function(e,s){return r("div",{key:s},[t._v(t._s(e))])})),0),t._m(0)])])])])},nt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-control"},[r("button",{attrs:{type:"submit"}},[t._v("注册")])])}],ot=(r("99af"),r("caad"),r("c975"),r("d3b7"),r("4d63"),r("ac1f"),r("25f0"),r("8a79"),r("2532"),r("2ca0"),{required:function(t){return!(!t&&0!==t)},numeric:function(t){return!!/^\d+$/.test(t.toString())},min:function(t,e){return!(parseFloat(t)<e)},max:function(t,e){return!(parseFloat(t)>e)},between:function(t,e,r){return!(!this.min(t,e)||!this.max(t,r))},positive:function(t){return!!this.numeric(t)&&!(t<=0)},negative:function(t){return!!this.numeric(t)&&!(t>=0)},minLength:function(t,e){return!(t.length<e)},maxLength:function(t,e){return!(t.length>e)},lengthBetween:function(t,e,r){return!(!this.minLength(t,e)||!this.maxLength(t,r))},startsWith:function(t,e){return!!t.startsWith(e)},endsWith:function(t,e){return!!t.endsWith(e)},includes:function(t,e){return!!t.includes(e)},in:function(t,e){return-1!==e.indexOf(t)},mail:function(t){var e=/^\w+@\w+\.\w+$/;return!!e.test(t)},username:function(t){var e=/^[a-zA-Z0-9]\w+$/;return!!e.test(t)},phone:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zh";switch(r){case"zh":e=/^(?:\+?(?:86))?(\s|-)?1\d{10}$/;break}return!!e.test(t)},regex:function(t,e){return"string"==typeof e&&(e=new RegExp(e)),!!e.test(t)},unique:function(t,e,r,s){return L("".concat(e,"/").concat(r),{where:{and:Object(R["a"])({},s,t)}}).then((function(t){return!t.data}))}});function lt(t,e){if("required"!==t&&!e&&0!==e)return!0;for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];return ot[t].apply(ot,[e].concat(s))}var ct={data:function(){return{form:{password:""},errors:[],currentCode:"",realCode:"",sendCodeCountDown:0,sendCodeTimer:null}},methods:{signup:function(){var t=this;if(this.currentCode!==this.realCode)return this.errors=[],void this.errors.push("验证码有误");L("user/create",this.form).then((function(e){e.success&&t.$router.push("/login")}))},validate:function(){var t=this.form,e=this.errors=[];return ot.mail(t.mail)||e.push("邮箱格式有误"),t.password.length<6&&e.push("密码长度不可小于6位"),!e.length},sendCode:function(){var t=this;this.validate()&&L("captcha/mail",{mail:this.form.mail}).then((function(e){e.success&&(t.realCode=atob(e.data.result),t.sendCodeCountDown=60,t.sendCodeTimer=setInterval((function(){t.sendCodeCountDown--,0==t.sendCodeCountDown&&clearInterval(t.sendCodeTimer)}),1e3))}))}}},ut=ct,dt=(r("765b"),Object(y["a"])(ut,it,nt,!1,null,null,null)),pt=dt.exports,ft=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"container-form"},[r("div",{staticClass:"form-card"},[r("div",{staticClass:"title"},[t._v("使用账号密码登录")]),r("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[r("div",{staticClass:"input-control"},[r("el-input",{attrs:{placeholder:"邮箱"},model:{value:t.form.mail,callback:function(e){t.$set(t.form,"mail",e)},expression:"form.mail"}})],1),r("div",{staticClass:"input-control"},[r("el-input",{attrs:{placeholder:"密码","show-password":""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),r("div",{staticClass:"hint"},[r("router-link",{attrs:{to:"/passwordrecover"}},[t._v("忘记密码？")]),r("router-link",{staticClass:"fr",attrs:{to:"/signup"}},[t._v("去注册")])],1),r("div",{staticClass:"error"},t._l(t.errors,(function(e,s){return r("div",{key:s},[t._v(t._s(e))])})),0),t._m(0)])])])])},mt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-control"},[r("button",{attrs:{type:"submit"}},[t._v("登录")])])}],vt={data:function(){return{form:{password:""},errors:[]}},methods:{validate:function(){var t=this.form,e=this.errors=[];return ot.mail(t.mail)||e.push("邮箱格式有误"),!e.length},login:function(){var t=this,e=this.form;this.errors=[],"admin"!==e.mail||"yoyoyo"!==e.password?this.validate()&&L("user/first",{where:{and:{mail:this.form.mail}}}).then((function(e){var r=e.data;r?r.password===t.form.password?(delete r.password,C.login(r.id,r)):t.errors.push("密码有误"):t.errors.push("邮箱尚未注册，请先注册")})):C.login("admin",{nickname:"Admin",IS_ADMIN:!0})}}},ht=vt,_t=(r("da41"),Object(y["a"])(ht,ft,mt,!1,null,null,null)),bt=_t.exports,Ct=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product"},[r("div",{staticClass:"container"},[r("div",{staticClass:"wrapper-box product-card"},[r("el-row",[r("el-col",{staticClass:"main-cover-thumbnail-container",attrs:{span:2}},t._l(t.row.main_img,(function(e,s){return r("div",{key:s,staticClass:"main-cover-thumbnail"},[r("img",{attrs:{src:t.fileUrl(e),alt:""},on:{click:function(e){return t.mainCoverChange(s)}}})])})),0),r("el-col",{staticClass:"main-cover-show",attrs:{span:8}},[r("img",{attrs:{src:t.currentCover,alt:""}})]),r("el-col",{staticClass:"product-info",attrs:{span:14}},[r("div",{staticClass:"title"},[r("h1",[t._v(t._s(t.row.title))]),r("div",{staticClass:"price"},[r("div",{staticClass:"now cny"},[t._v(t._s(t.row.price))]),r("div",{staticClass:"before"},[t._v("原价：￥199.00")])])]),r("div",{staticClass:"desc"},[t._v("智能配对 开盖即连")]),t._l(t.row.prop,(function(e,s,a){return r("section",{key:a,staticClass:"choose"},[r("span",{staticClass:"spec-title"},[t._v(t._s(s))]),t._l(e,(function(e,a){return r("span",{key:a,staticClass:"prop-item",class:t.form.prop[s]===e?"active":"",on:{click:function(r){return t.setProp(s,e)}}},[t._v(t._s(e))])}))],2)})),r("section",{staticClass:"number"},[r("span",{staticClass:"spec-title"},[t._v("数量选择")]),r("el-input-number",{attrs:{min:1,max:10,label:"描述文字"},model:{value:t.form.count,callback:function(e){t.$set(t.form,"count",e)},expression:"form.count"}})],1),r("section",{staticClass:"buy-cart"},[r("el-button",{attrs:{type:"primary"},on:{click:t.createOrder}},[t._v("现在购买")]),r("el-button",[t._v("加入购物车")])],1)],2)],1)],1),r("div",{staticClass:"wrapper-box product-detail-card"},[r("div",{staticClass:"title"},[t._v("产品信息")]),r("div",{staticClass:"content"},t._l(t.row.detail,(function(e,s){return r("div",{key:s},["text"===e.type?r("div",[t._v(t._s(e.value))]):r("div",[r("img",{attrs:{src:t.fileUrl(e.value),alt:""}})])])})),0)])])])},gt=[],wt=(r("7db0"),r("1276"),{mounted:function(){this.row.id=this.$route.params.id,this.find()},data:function(){return{row:{},currentCover:"",form:{count:1,prop:{}}}},methods:{fileUrl:J,find:function(){var t=this;L("product/find",this.row).then((function(e){t.row=e.data,t.normalize()}))},normalize:function(){var t=this.row.prop,e={};for(var r in t){var s=t[r];e[r]=s.split("|")}this.row.prop=e,this.currentCover=J(this.row.main_img[0])},mainCoverChange:function(t){this.currentCover=J(this.row.main_img[t])},setProp:function(t,e){this.$set(this.form.prop,t,e)},createOrder:function(){var t=this,e=this.row,r=this.form;r.product_id=e.id,r.product_snapshot=e;var s={product_list:[r]};s.sum=tt(s.product_list),C.user().id&&(s.user_id=C.user().id,this.form.count?this.allPropsChecked()?L("order/create",s).then((function(e){e.success&&t.$router.push("/my/order/".concat(e.data.id))})):alert("请选择所有属性选项！"):alert("请选择数量"))},allPropsChecked:function(){var t=this.row.prop;for(var e in t)return!!this.form.prop[e]}}}),yt=wt,kt=(r("9bf6"),Object(y["a"])(yt,Ct,gt,!1,null,"1469c0dc",null)),xt=kt.exports,Ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"container-form"},[r("div",{staticClass:"form-card"},[r("div",{staticClass:"title"},[t._v("找回密码")]),r("form",{on:{submit:function(e){return e.preventDefault(),t.recover(e)}}},[r("div",{staticClass:"input-control"},[r("el-input",{attrs:{placeholder:"邮箱"},model:{value:t.form.mail,callback:function(e){t.$set(t.form,"mail",e)},expression:"form.mail"}})],1),r("div",{staticClass:"input-control"},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"验证码"},model:{value:t.currentCode,callback:function(e){t.currentCode=e},expression:"currentCode"}},[r("el-button",{attrs:{slot:"append",disabled:!!t.sendCodeCountDown},on:{click:t.sendCode},slot:"append"},[t.sendCodeCountDown?r("span",[t._v(t._s(t.sendCodeCountDown)+"s")]):r("span",[t._v("获取验证码")])])],1)],1),r("div",{staticClass:"input-control"},[r("el-input",{attrs:{placeholder:"设置新密码","show-password":""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),r("div",{staticClass:"input-control"},[r("el-input",{attrs:{placeholder:"重复新密码","show-password":""},model:{value:t.form.passwordRepeat,callback:function(e){t.$set(t.form,"passwordRepeat",e)},expression:"form.passwordRepeat"}})],1),r("div",{staticClass:"error"},t._l(t.errors,(function(e,s){return r("div",{key:s},[t._v(t._s(e))])})),0),t._m(0)])])])])},Dt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-control"},[r("button",{attrs:{type:"submit"}},[t._v("确认")])])}],At={data:function(){return{form:{password:""},errors:[],currentCode:"",realCode:"",sendCodeCountDown:0,sendCodeTimer:null,realMail:""}},methods:{recover:function(){var t=this;this.errors=[],this.currentCode===this.realCode?this.validate()&&(this.form.mail===this.realMail?L("user/update",this.form).then((function(e){e.success&&t.$router.push("/login")})):this.errors.push("请重新输入邮箱")):this.errors.push("验证码有误")},validate:function(){var t=this.form,e=this.errors=[];return ot.mail(t.mail)||e.push("邮箱格式有误"),t.password.length<6&&e.push("密码长度不可小于6位"),t.password!==t.passwordRepeat&&e.push("两次密码输入不一致"),!e.length},sendCode:function(){var t=this;this.errors=[],ot.mail(this.form.mail)?L("user/first",{where:{and:{mail:this.form.mail}}}).then((function(e){var r=e.data;r?(t.form.id=r.id,t.realMail=r.mail,L("captcha/mail",{mail:t.form.mail}).then((function(e){e.success&&(t.realCode=atob(e.data.result),t.sendCodeCountDown=60,t.sendCodeTimer=setInterval((function(){t.sendCodeCountDown--,0==t.sendCodeCountDown&&clearInterval(t.sendCodeTimer)}),1e3))}))):t.errors.push("邮箱不存在，请去注册")})):this.errors.push("邮箱格式有误")}}},St=At,It=(r("5d4b"),Object(y["a"])(St,Ot,Dt,!1,null,null,null)),$t=It.exports,zt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"admin"},[r("el-row",{staticClass:"container"},[r("h1",[t._v("个人中心")]),r("el-col",{attrs:{span:4}},[r("div",{staticClass:"wrapper-box text-center nav-cat"},[r("div",{staticClass:"link-group-v"},[r("router-link",{attrs:{to:"/my/order"}},[t._v("订单管理")]),r("router-link",{attrs:{to:"/my/cart"}},[t._v("购物车")])],1)])]),r("el-col",{staticClass:"admin-view",attrs:{span:20}},[r("div",{staticClass:"wrapper-box"},[r("router-view")],1)])],1)],1)},jt=[],Ut={},Pt=Ut,Bt=(r("f2a5"),Object(y["a"])(Pt,zt,jt,!1,null,null,null)),Ft=Bt.exports,Tt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"my-order"},[r("h2",[t._v("我的订单")]),t.$route.params.id?r("div",{staticClass:"order-card"},[r("div",{staticClass:"title"},[t._v("订单详情")]),r("div",{staticClass:"pair"},[r("div",[t._v("订单号:")]),r("div",[t._v(t._s(t.form.id))])]),r("div",{staticClass:"pair"},[r("div",[t._v("总价:")]),r("div",{staticClass:"cny"},[t._v(t._s(t.form.sum))])]),t._m(0)]):t._e(),r("div",{staticClass:"table-user"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,"max-height":"500"}},[r("el-table-column",{attrs:{fixed:"",prop:"id",label:"订单号"}}),r("el-table-column",{attrs:{fixed:"",prop:"sum",label:"总价"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini",type:"text"}},[r("router-link",{attrs:{to:"/my/order/"+e.row.id}},[t._v("详情")])],1),r("el-button",{attrs:{size:"mini",type:"danger"}},[t._v("删除")])]}}])})],1)],1)])},Mt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pair"},[r("div",[t._v("付款方式:")])])}],qt={mounted:function(){this.read(),this.form.id=this.$route.params.id,this.form.id&&this.find()},data:function(){return{list:[],form:{}}},methods:{read:function(){var t=this;L("order/read",{where:{and:{user_id:C.user().id}}}).then((function(e){t.list=e.data}))},find:function(){var t=this;L("order/find",{id:this.form.id}).then((function(e){t.form=e.data,console.log(e.data)}))}},watch:{$route:{handler:function(t){var e=t.params;e.id&&(this.form.id=e.id,this.find())},deep:!0}}},Et=qt,Qt=(r("5047"),Object(y["a"])(Et,Tt,Mt,!1,null,"704e1968",null)),Vt=Qt.exports,Rt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"admin"},[r("el-row",{staticClass:"container"},[r("h1",[t._v("管理页")]),r("el-col",{attrs:{span:4}},[r("div",{staticClass:"wrapper-box text-center nav-cat"},[r("div",{staticClass:"link-group-v"},[r("router-link",{attrs:{to:"/admin/user"}},[t._v("用户管理")]),r("router-link",{attrs:{to:"/admin/brand"}},[t._v("品牌管理")]),r("router-link",{attrs:{to:"/admin/cat"}},[t._v("分类管理")]),r("router-link",{attrs:{to:"/admin/product"}},[t._v("商品管理")])],1)])]),r("el-col",{staticClass:"admin-view",attrs:{span:20}},[r("div",{staticClass:"wrapper-box"},[r("router-view")],1)])],1)],1)},Zt=[],Ht={},Nt=Ht,Xt=(r("df6b"),Object(y["a"])(Nt,Rt,Zt,!1,null,null,null)),Kt=Xt.exports,Yt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"admin-user"},[r("div",{staticClass:"edit-user"},[r("el-button",{on:{click:function(e){t.ui.formVisible=!0}}},[t._v("修改/创建用户")])],1),t.ui.formVisible?r("div",{staticClass:"form-edit"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.createOrUpdate(e)}}},[r("div",{staticClass:"input-field"},[r("el-input",{attrs:{type:"text",placeholder:"昵称"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}}),r("div",{staticClass:"error-list"},t._l(t.errors.nickname,(function(e,s){return r("div",{key:s.id,staticClass:"error"},[e?r("span",[t._v(t._s(t.rules.nickname[s].msg))]):t._e()])})),0)],1),r("div",{staticClass:"input-field"},[r("el-input",{attrs:{type:"text",placeholder:"手机号码"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}}),r("div",{staticClass:"error-list"},t._l(t.errors.phone,(function(e,s){return r("div",{key:s.id,staticClass:"error"},[e?r("span",[t._v(t._s(t.rules.phone[s].msg))]):t._e()])})),0)],1),r("div",{staticClass:"input-field"},[r("el-input",{attrs:{type:"text",placeholder:"邮箱"},model:{value:t.form.mail,callback:function(e){t.$set(t.form,"mail",e)},expression:"form.mail"}}),r("div",{staticClass:"error-list"},t._l(t.errors.mail,(function(e,s){return r("div",{key:s.id,staticClass:"error"},[e?r("span",[t._v(t._s(t.rules.mail[s].msg))]):t._e()])})),0)],1),r("div",{staticClass:"input-field"},[r("el-input",{attrs:{type:"text",placeholder:"密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),r("div",{staticClass:"error-list"},t._l(t.errors.password,(function(e,s){return r("div",{key:s.id,staticClass:"error"},[e?r("span",[t._v(t._s(t.rules.password[s].msg))]):t._e()])})),0)],1),r("div",{staticClass:"input-field"},[r("el-button",{attrs:{"native-type":"submit"}},[t._v("提交")])],1)])]):t._e(),r("div",{staticClass:"table-user"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,"max-height":"500"}},[r("el-table-column",{attrs:{fixed:"",prop:"nickname",label:"昵称",width:"80"}}),r("el-table-column",{attrs:{prop:"phone",label:"手机号",width:"120"}}),r("el-table-column",{attrs:{prop:"mail",label:"邮箱",width:"120"}}),r("el-table-column",{attrs:{prop:"password",label:"密码","min-width":"120"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return t.edit(e.$index,e.row)}}},[t._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return t.remove(e.row.id)}}},[t._v("删除")])]}}])})],1),r("div",{staticClass:"pagination text-center"},[r("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.readParam.limit,"current-page":t.readParam.page},on:{"current-change":t.flip}})],1)],1)])},Gt=[],Lt=r("5530"),Wt=r("2909"),Jt={mounted:function(){this.read()},data:function(){return{list:[],form:{},formOriginal:{},errors:{},ui:{formVisible:!0},total:0,readParam:{limit:7,page:1}}},methods:{flip:function(t){this.readParam.page=t,this.read()},createOrUpdate:function(){var t,e=this,r=this.form;this.validateForm()&&(t=r.id?"update":"create",L("".concat(this.model,"/").concat(t),r).then((function(t){t.success&&(e.read(),e.resetForm())})))},resetForm:function(){this.ui.formVisible=!1,this.form={},this.errors={}},validateForm:function(){var t=this.rules,e=this.form,r=!!e.id,s=!0;for(var a in t)r&&e[a]===this.formOriginal[a]||this.validateField(a)||(s=!1);return s},validateField:function(t){var e=this,r=this.form[t],s=!0,a=this.rules[t],i=function(i){var n=a[i],o=n.params||[],l=lt.apply(void 0,[i,r].concat(Object(Wt["a"])(o)));"boolean"==typeof l?(e.afterValidate(t,i,l),l||(s=!1)):l.then((function(r){e.afterValidate(t,i,r)}))};for(var n in a)i(n);return s},afterValidate:function(t,e,r){var s=this.errors[t];s||(s=this.$set(this.errors,t,{})),this.$set(s,e,!r)},edit:function(t,e){this.ui.formVisible=!0,this.formOriginal=e,this.form=Object(Lt["a"])({},e)},remove:function(t){var e=this;confirm("确定删除？")&&L("".concat(this.model,"/delete"),{id:t}).then((function(t){t.success&&e.read()}))},read:function(){var t=this;L("".concat(this.model,"/read"),this.readParam).then((function(e){t.list=e.data,t.total=e.total}))},makeSelect:function(t){var e=this;return function(r){e.form[t]=r.id}}}},te={mixins:[Jt],data:function(){return{model:"user",rules:{nickname:{unique:{params:["user","exists","nickname"],msg:"用户名已存在"},required:{msg:"此项为必填项"},lengthBetween:{params:[2,12],msg:"最小长度需在2至12位之间"},regex:{params:[/^[a-zA-Z0-9\u4e00-\u9fa5]{2,10}$/],msg:"用户名格式不和法，需包含字母"}},phone:{unique:{params:["user","exists","phone"],msg:"手机号已存在"},phone:{msg:"手机号格式有误"}},mail:{unique:{params:["user","exists","mail"],msg:"邮箱已存在"},mail:{msg:"邮箱格式有误"}},password:{required:{msg:"密码为必填项"},lengthBetween:{params:[6,24],msg:"密码长度需在6位24位之间"},regex:{params:[/(?=[^0-9]*[0-9]+)(?=[^a-zA-Z]*[a-zA-Z]+)/],msg:"密码必须包含字母和数字"}}},keyword:""}},methods:{}},ee=te,re=(r("2bbd"),Object(y["a"])(ee,Yt,Gt,!1,null,"382b3ed9",null)),se=re.exports,ae=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"admin-user"},[r("div",{staticClass:"edit-user"},[r("el-button",{on:{click:function(e){t.ui.formVisible=!0}}},[t._v("修改/创建品牌")])],1),t.ui.formVisible?r("div",{staticClass:"form-edit"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.createOrUpdate(e)}}},[r("div",{staticClass:"input-field"},[r("el-input",{attrs:{type:"text",placeholder:"品牌名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),r("div",{staticClass:"error-list"},t._l(t.errors.name,(function(e,s){return r("div",{key:s.id,staticClass:"error"},[e?r("span",[t._v(t._s(t.rules.name[s].msg))]):t._e()])})),0)],1),r("div",{staticClass:"input-field"},[r("el-button",{attrs:{"native-type":"submit"}},[t._v("提交")])],1)])]):t._e(),r("div",{staticClass:"table-user"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,"max-height":"500"}},[r("el-table-column",{attrs:{fixed:"",prop:"name",label:"品牌名"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return t.edit(e.$index,e.row)}}},[t._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return t.remove(e.row.id)}}},[t._v("删除")])]}}])})],1),r("div",{staticClass:"pagination text-center"},[r("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.readParam.limit,"current-page":t.readParam.page},on:{"current-change":t.flip}})],1)],1)])},ie=[],ne={mixins:[Jt],data:function(){return{model:"brand",rules:{name:{unique:{params:["brand","exists","name"],msg:"品牌名已存在"},required:{msg:"此项为必填项"}}},keyword:""}},methods:{}},oe=ne,le=(r("cb1b"),Object(y["a"])(oe,ae,ie,!1,null,"cf294bce",null)),ce=le.exports,ue=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"admin-user"},[r("div",{staticClass:"edit-user"},[r("el-button",{on:{click:function(e){t.ui.formVisible=!0}}},[t._v("修改/创建分类")])],1),t.ui.formVisible?r("div",{staticClass:"form-edit"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.createOrUpdate(e)}}},[r("div",{staticClass:"input-field"},[r("el-input",{attrs:{type:"text",placeholder:"分类名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),r("div",{staticClass:"error-list"},t._l(t.errors.name,(function(e,s){return r("div",{key:s.id,staticClass:"error"},[e?r("span",[t._v(t._s(t.rules.name[s].msg))]):t._e()])})),0)],1),r("div",{staticClass:"input-field"},[r("Dropdown",{attrs:{api:"cat/read",searchBy:"name",displayBy:"name",onSelect:t.selectParent}})],1),r("div",{staticClass:"input-field"},[r("el-button",{attrs:{"native-type":"submit"}},[t._v("提交")])],1)])]):t._e(),r("div",{staticClass:"table-user"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,"max-height":"500"}},[r("el-table-column",{attrs:{fixed:"",prop:"name",label:"分类名"}}),r("el-table-column",{attrs:{fixed:"",prop:"$parent.name",label:"父级分类名"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return t.edit(e.$index,e.row)}}},[t._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return t.remove(e.row.id)}}},[t._v("删除")])]}}])})],1),r("div",{staticClass:"pagination text-center"},[r("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.readParam.limit,"current-page":t.readParam.page},on:{"current-change":t.flip}})],1)],1)])},de=[],pe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"dropdown"},[r("div",{staticClass:"filter"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],class:t.glassName,attrs:{type:"search",placeholder:t.placeholderText},domProps:{value:t.keyword},on:{focus:function(e){t.visible=!0,t.reset()},blur:function(e){t.hideResult(),t.$emit("blur")},input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),t.visible?r("div",{staticClass:"list"},t._l(t.result,(function(e,s){return r("div",{key:s,staticClass:"option",on:{mousedown:function(r){return t.select(e)}}},[t._v(t._s(e[t.displayBy]))])})),0):t._e()])])},fe=[],me=(r("4de4"),{props:["list","searchBy","displayBy","onSelect","api","glassName","placeholderText"],data:function(){return{visible:!1,keyword:"",result:[],timer:null}},mounted:function(){this.api?this.filterAsync():this.result=Object(Wt["a"])(this.list)},methods:{hideResult:function(){var t=this;setTimeout((function(){t.visible=!1}),1)},reset:function(){this.keyword="",this.select(null)},select:function(t){t&&(this.keyword=t[this.displayBy]),t&&this.onSelect&&this.onSelect(t)},filter:function(){var t=this;this.result=this.list.filter((function(e){return e[t.searchBy].includes(t.keyword)}))},filterAsync:function(){var t=this,e={};this.keyword&&(e={query:'where("'.concat(this.searchBy,'" contains "').concat(this.keyword,'")')}),L(this.api,e).then((function(e){return t.result=e.data||[]}))},debounceFilterAsync:function(){var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){t.filterAsync()}),300)}},watch:{keyword:function(){this.api?this.debounceFilterAsync():this.filter()}}}),ve=me,he=(r("8882"),Object(y["a"])(ve,pe,fe,!1,null,"4a665a51",null)),_e=he.exports,be={mixins:[Jt],components:{Dropdown:_e},data:function(){return{model:"cat",rules:{name:{unique:{params:["user","exists","nickname"],msg:"分类名已存在"},required:{msg:"此项为必填项"}}},readParam:{with:[{model:"cat",relation:"belongs_to",foreign_key:"parent_id",as:"parent"}]},keyword:""}},methods:{selectParent:function(t){this.form.parent_id=t.id}}},Ce=be,ge=(r("b26e"),Object(y["a"])(Ce,ue,de,!1,null,"afae5762",null)),we=ge.exports,ye=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"admin-user"},[r("div",{staticClass:"edit-user"},[r("el-button",{on:{click:function(e){t.ui.formVisible=!0}}},[t._v("创建/修改商品")])],1),t.ui.formVisible?r("div",{staticClass:"form-edit"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.createOrUpdate(e)}}},[r("el-row",{staticClass:"input-field"},[r("el-col",{staticClass:"title",attrs:{span:3}},[t._v("商品名称：")]),r("el-col",{attrs:{span:21}},[r("el-input",{attrs:{type:"text"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),r("div",{staticClass:"error-list"},t._l(t.errors.title,(function(e,s){return r("div",{key:s.id,staticClass:"error"},[e?r("span",[t._v(t._s(t.rules.title[s].msg))]):t._e()])})),0)],1)],1),r("el-row",{staticClass:"input-field"},[r("el-col",{staticClass:"title",attrs:{span:3}},[t._v("商品价格：")]),r("el-col",{attrs:{span:21}},[r("el-input",{attrs:{type:"text"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}}),r("div",{staticClass:"error-list"},t._l(t.errors.price,(function(e,s){return r("div",{key:s.id,staticClass:"error"},[e?r("span",[t._v(t._s(t.rules.price[s].msg))]):t._e()])})),0)],1)],1),r("el-row",{staticClass:"input-field"},[r("el-col",{attrs:{span:3}},[r("div",{staticClass:"title"},[t._v("商品品牌：")])]),r("el-col",{attrs:{span:21}},[r("Dropdown",{attrs:{api:"brand/read",searchBy:"name",displayBy:"name",onSelect:t.makeSelect("brand_id"),glassName:"el-input__inner"}}),r("div",{staticClass:"error-list"},t._l(t.errors.brand_id,(function(e,s){return r("div",{key:s.id,staticClass:"error"},[e?r("span",[t._v(t._s(t.rules.brand_id[s].msg))]):t._e()])})),0)],1)],1),r("el-row",{staticClass:"input-field"},[r("el-col",{staticClass:"title",attrs:{span:3}},[t._v("商品分类：")]),r("el-col",{attrs:{span:21}},[r("Dropdown",{attrs:{api:"cat/read",searchBy:"name",displayBy:"name",onSelect:t.makeSelect("cat_id"),glassName:"el-input__inner"}}),r("div",{staticClass:"error-list"},t._l(t.errors.cat_id,(function(e,s){return r("div",{key:s.id,staticClass:"error"},[e?r("span",[t._v(t._s(t.rules.cat_id[s].msg))]):t._e()])})),0)],1)],1),r("el-row",{staticClass:"input-field"},[r("el-col",{staticClass:"title",attrs:{span:3}},[t._v("商品运费：")]),r("el-col",{attrs:{span:21}},[r("el-input",{attrs:{type:"text"},model:{value:t.form.shipping_fee,callback:function(e){t.$set(t.form,"shipping_fee",e)},expression:"form.shipping_fee"}}),r("div",{staticClass:"error-list"},t._l(t.errors.shipping_fee,(function(e,s){return r("div",{key:s.id,staticClass:"error"},[e?r("span",[t._v(t._s(t.rules.shipping_fee[s].msg))]):t._e()])})),0)],1)],1),r("el-row",{staticClass:"input-field"},[r("el-col",{staticClass:"title",attrs:{span:3}},[t._v("商品库存：")]),r("el-col",{attrs:{span:21}},[r("el-input",{attrs:{type:"text"},model:{value:t.form.total,callback:function(e){t.$set(t.form,"total",e)},expression:"form.total"}}),r("div",{staticClass:"error-list"},t._l(t.errors.total,(function(e,s){return r("div",{key:s.id,staticClass:"error"},[e?r("span",[t._v(t._s(t.rules.total[s].msg))]):t._e()])})),0)],1)],1),r("el-row",{staticClass:"input-field spec-prop"},[r("el-col",{staticClass:"title",attrs:{span:3}},[t._v("商品属性：")]),r("el-col",{attrs:{span:21}},[r("el-input",{attrs:{size:"mini",placeholder:"属性名称，如：颜色"},model:{value:t.propForm.key,callback:function(e){t.$set(t.propForm,"key",e)},expression:"propForm.key"}}),r("el-input",{attrs:{size:"mini",placeholder:"具体属性，多个属性请用 “|” 分开，如：红色|蓝色|黑色|绿色"},model:{value:t.propForm.value,callback:function(e){t.$set(t.propForm,"value",e)},expression:"propForm.value"}}),r("el-button",{attrs:{size:"mini"},on:{click:t.addProp}},[t._v("添加")]),r("div",{staticClass:"show-prop"},t._l(t.form.prop,(function(e,s,a){return r("div",{key:a},[r("span",{staticClass:"prop-group"},[r("span",[t._v(t._s(s)+"：")]),r("span",[t._v(t._s(e))])]),r("el-button",{attrs:{size:"mini"},on:{click:function(r){return t.propEdit(s,e)}}},[t._v("编辑")]),r("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.propDelete(s)}}},[t._v("删除")])],1)})),0)],1)],1),r("el-row",{staticClass:"input-field"},[r("el-col",{staticClass:"title",attrs:{span:3}},[t._v("新品：")]),r("el-col",{attrs:{span:21}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#aaa"},model:{value:t.form.is_new,callback:function(e){t.$set(t.form,"is_new",e)},expression:"form.is_new"}})],1)],1),r("el-row",{staticClass:"input-field"},[r("el-col",{staticClass:"title",attrs:{span:3}},[t._v("热卖：")]),r("el-col",{attrs:{span:21}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#aaa"},model:{value:t.form.is_hot,callback:function(e){t.$set(t.form,"is_hot",e)},expression:"form.is_hot"}})],1)],1),r("el-row",{staticClass:"input-field"},[r("el-col",{staticClass:"title",attrs:{span:3}},[t._v("首页轮播：")]),r("el-col",{attrs:{span:21}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#aaa"},model:{value:t.form.is_carousel,callback:function(e){t.$set(t.form,"is_carousel",e)},expression:"form.is_carousel"}}),t.form.is_carousel?r("div",[r("Uploader",{attrs:{autoUpload:!0},on:{uploadSuccess:t.carouselUploaded}}),t.form.carousel_img?r("div",{staticClass:"thumbnail-container"},[r("img",{attrs:{src:t.form.carousel_img}}),r("el-button",{staticClass:"thumbnail-delete",attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.removeMainCover(t.index)}}})],1):t._e()],1):t._e()],1)],1),r("el-row",{staticClass:"input-field"},[r("el-col",{staticClass:"title",attrs:{span:3}},[t._v("首页广告：")]),r("el-col",{attrs:{span:21}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#aaa"},model:{value:t.form.is_top_banner,callback:function(e){t.$set(t.form,"is_top_banner",e)},expression:"form.is_top_banner"}}),t.form.is_top_banner?r("div",[r("Uploader",{attrs:{autoUpload:!0},on:{uploadSuccess:t.topBannerUploaded}}),t.form.top_banner_img?r("div",{staticClass:"thumbnail-container"},[r("img",{attrs:{src:t.form.top_banner_img}}),r("el-button",{staticClass:"thumbnail-delete",attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.removeMainCover(t.index)}}})],1):t._e()],1):t._e()],1)],1),r("el-row",{staticClass:"input-field"},[r("el-col",{staticClass:"title",attrs:{span:3}},[t._v("添加主图：")]),r("el-col",{attrs:{span:21}},[r("Uploader",{attrs:{autoUpload:!0},on:{uploadSuccess:t.singleCoverUploaded}}),r("el-row",{staticClass:"uploaded-img",attrs:{gutter:6}},t._l(t.form.main_img,(function(e,s){return r("el-col",{key:s,attrs:{span:6}},[r("div",{staticClass:"thumbnail-container"},[r("img",{attrs:{src:t.fileUrl(e),alt:e._original_name}}),r("el-button",{staticClass:"thumbnail-delete",attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.removeMainCover(s)}}})],1)])})),1)],1)],1),r("el-row",{staticClass:"input-field"},[r("el-col",{staticClass:"title",attrs:{span:3}},[t._v("详情描述：")]),r("el-col",{attrs:{span:21}},[r("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.insertDesc("text")}}},[t._v("插入文字")]),r("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.insertDesc("image")}}},[t._v("插入图片")]),r("div",{staticClass:"preview"},t._l(t.form.detail,(function(e,s){return r("div",{key:s,staticClass:"segment"},[r("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.removeSeg(s)}}},[t._v("删除")]),"text"===e.type?r("div",[r("el-input",{attrs:{type:"textarea"},model:{value:e.value,callback:function(r){t.$set(e,"value",r)},expression:"item.value"}})],1):r("div",[r("Uploader",{attrs:{autoUpload:!0},on:{uploadSuccess:function(e){return t.singleDescImageUploaded(e,s)}}}),e.value?r("div",[r("img",{attrs:{src:t.fileUrl(e.value)}})]):t._e()],1)],1)})),0)],1)],1),r("div",{staticClass:"input-field"},[r("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("提交")]),r("el-button",{on:{click:function(e){t.ui.formVisible=!1}}},[t._v("取消")])],1)],1)]):t._e(),r("div",{staticClass:"table-user"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,"max-height":"500"}},[r("el-table-column",{attrs:{fixed:"",prop:"title",label:"名称","min-width":"150"}}),r("el-table-column",{attrs:{prop:"price",label:"价格"}}),r("el-table-column",{attrs:{prop:"total",label:"库存"}}),r("el-table-column",{attrs:{prop:"$brand.name",label:"品牌"}}),r("el-table-column",{attrs:{prop:"$cat.name",label:"分类","min-width":"50"}}),r("el-table-column",{attrs:{label:"主图","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.main_img,(function(e,s){return r("span",{key:s,staticClass:"thunbnail-img-table"},[r("img",{attrs:{src:t.fileUrl(e)}})])}))}}])}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return t.edit(e.$index,e.row)}}},[t._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return t.remove(e.row.id)}}},[t._v("删除")])]}}])})],1),r("div",{staticClass:"pagination text-center"},[r("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.readParam.limit,"current-page":t.readParam.page},on:{"current-change":t.flip}})],1)],1)])},ke=[],xe=(r("a434"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("input",{attrs:{type:"file"},on:{change:t.onFill}})])}),Oe=[],De={props:["autoUpload"],data:function(){return{file:null}},methods:{onFill:function(t){var e=this,r=this.file=t.target.files[0],s=new FormData;s.append("file",r),this.$emit("change",r),this.autoUpload&&L("_file/create",s).then((function(r){r.success?(t.target.value="",e.$emit("uploadSuccess",r.data)):e.$emit("uploadFail",r)}))}}},Ae=De,Se=(r("dd26"),Object(y["a"])(Ae,xe,Oe,!1,null,"510fc446",null)),Ie=Se.exports,$e={mixins:[Jt],components:{Dropdown:_e,Uploader:Ie},data:function(){return{model:"product",propForm:{},rules:{title:{required:{msg:"此项为必填项"}},cat_id:{required:{msg:"此项为必填项"}},brand_id:{required:{msg:"此项为必填项"}},price:{required:{msg:"此项为必填项"},min:{params:[0],msg:"价格不可小于0"}},shipping_fee:{min:{params:[0],msg:"运费不可小于0"}},total:{min:{params:[0],msg:"库存不可小于0"}}},readParam:{with:["belongs_to:cat","belongs_to:brand"]},keyword:""}},methods:{fileUrl:J,addProp:function(){var t=this.propForm,e=this.form;t.key&&t.value&&(e.prop?e.prop:this.$set(e,"prop",{}),this.$set(e.prop,this.propForm.key,this.propForm.value),this.propForm={})},propEdit:function(t,e){this.$set(this.propForm,"key",t),this.$set(this.propForm,"value",e)},propDelete:function(t){this.$delete(this.form.prop,t)},removeMainCover:function(t){this.form.main_img.splice(t,1)},singleCoverUploaded:function(t){var e=this.form;e.main_img||this.$set(e,"main_img",[]),this.form.main_img.push(t)},carouselUploaded:function(t){this.form.carousel_img=J(t)},topBannerUploaded:function(t){this.form.top_banner_img=J(t)},singleDescImageUploaded:function(t,e){this.updateDesc(e,t)},insertDesc:function(t){this.form.detail||this.$set(this.form,"detail",[]),this.form.detail.push({type:t})},updateDesc:function(t,e){this.$set(this.form.detail[t],"value",e)},removeSeg:function(t){this.form.detail.splice(t,1)}}},ze=$e,je=(r("b953"),Object(y["a"])(ze,ye,ke,!1,null,"6959f270",null)),Ue=je.exports;s["default"].use(a["a"]),s["default"].use(n.a);var Pe=new a["a"]({routes:[{path:"/",component:at},{path:"/signup",component:pt},{path:"/login",component:bt},{path:"/product/:id",component:xt},{path:"/passwordrecover",component:$t},{path:"/my",component:Ft,children:[{path:"order/:id?",component:Vt}]},{path:"/admin",component:Kt,children:[{path:"user",component:se},{path:"brand",component:ce},{path:"cat",component:we},{path:"product",component:Ue}]}]});Pe.beforeEach((function(t,e,r){var s="/admin"==t.matched[0].path,a=C.isAdmin();s&&!a||r()})),s["default"].config.productionTip=!1,new s["default"]({router:Pe,render:function(t){return t(E)}}).$mount("#app")},"583a":function(t,e,r){},"5d4b":function(t,e,r){"use strict";var s=r("ae63"),a=r.n(s);a.a},"5db8":function(t,e,r){},"600b":function(t,e,r){},"765b":function(t,e,r){"use strict";var s=r("3e82"),a=r.n(s);a.a},"880d":function(t,e,r){},8882:function(t,e,r){"use strict";var s=r("880d"),a=r.n(s);a.a},8968:function(t,e,r){},"89f1":function(t,e,r){"use strict";var s=r("fca2"),a=r.n(s);a.a},"9bf6":function(t,e,r){"use strict";var s=r("b060"),a=r.n(s);a.a},"9cb3":function(t,e,r){"use strict";var s=r("f19e"),a=r.n(s);a.a},a419:function(t,e,r){"use strict";var s=r("006c"),a=r.n(s);a.a},ae63:function(t,e,r){},b060:function(t,e,r){},b26e:function(t,e,r){"use strict";var s=r("b3c6"),a=r.n(s);a.a},b3c6:function(t,e,r){},b468:function(t,e,r){t.exports=r.p+"img/prom-1.24f4a61b.webp"},b953:function(t,e,r){"use strict";var s=r("335e"),a=r.n(s);a.a},cb1b:function(t,e,r){"use strict";var s=r("2b0e3"),a=r.n(s);a.a},da41:function(t,e,r){"use strict";var s=r("266e"),a=r.n(s);a.a},dd26:function(t,e,r){"use strict";var s=r("583a"),a=r.n(s);a.a},df6b:function(t,e,r){"use strict";var s=r("1c1e"),a=r.n(s);a.a},f19e:function(t,e,r){},f2a5:function(t,e,r){"use strict";var s=r("8968"),a=r.n(s);a.a},f771:function(t,e,r){},fca2:function(t,e,r){}});
//# sourceMappingURL=app.af44cc49.js.map